<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="single-page-styles.css">
    <link rel="stylesheet" href="./styles.css">
    <script src="./scripts.js" defer></script>
    <title>Flutter/Night Demo</title>
</head>

<body>
    <nav class="nav-bar">
        <img src="./imgs/img_avatar.png" alt="">
        <div class="header">
            <span>
                <h1>Lambert Bayiringire</h1>
            </span>
        </div>
        <div class="header-left">
            <ul class="nav-menu">
                <li class="nav-item"><a href="./index.html" class="nav-link">Home</a></li>
                <li class="nav-item"><a href="#aboutme" class="nav-link">About me</a></li>
                <li class="nav-item"><a href="#portfolio" class="nav-link">Portfolio</a></li>
                <li class="nav-item"><a href="#blogs" class="nav-link">Blogs</a></li>
                <li class="nav-item"><a href="#contact-me" class="nav-link">Contact Me</a></li>
                <li class="nav-item"><a href="./login-page.html" class="nav-link">LogIn</a></li>
            </ul>
            <div class="hamburger">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </div>
        </div>
    </nav>
    <div class="blog-article">
        <div class="blog-container">
            <div class="content">
                
            </div>
            <div class="comments">
            
            </div>
        </div>
    </div>
    <script>
        window.onload = blogView();
        window.onload = getComments();
        function blogView() {
            let Blogsd = JSON.parse(localStorage.getItem("blogs"));
            let id;
            var parts = window.location.search.substr(1).split("&");
            id = parts[0];
            console.log(parts[0])
        const singleBlog = document.querySelector(".content");
        singleBlog.innerHTML = `
        <div class="single-blog-title">
                    <h3>Flutter Demo night 2023</h3>
                </div>
                <div class="single-blog-box">
                    <div class="single-blog-img">
                        <img src="${Blogsd[id].photo}" alt="">
                        <span>21 Dec 2022 / NodeJs</span>
                    </div>
                    <div class="single-blog-description">
                        <p>${Blogsd[id].content}
                        </p>
                        <div class="like-section">
                            <p>20 likes</p>
                            <p>${Blogsd[id].comments.length} comments</p>
                        </div>
                    </div>
                    <div class="contactForm">
                        <form name="formValidate" onsubmit="event.preventDefault();createComments(${id});validateComment();">
                            <h2>send message</h2>
                            <div class="inputBox">
                                <input type="text" name="names" id="names">
                                <span>Full-Name</span>
                                <div class="error"></div>
                            </div>
                            <div class="inputBox">
                                <textarea name="message" id="txtmessage"></textarea>
                                <span>Your message...</span>
                                <div class="error"></div>
                            </div>
                            <div class="inputBox">
                                <input type="submit" name="" value="send">
                            </div>
                        </form>
                        <div class="comments">
                        </div>
                    </div>
                </div>
        `
        
        }
        function getComments(){
            let blog = JSON.parse(localStorage.getItem("blogs"));
            let id;
            var parts = window.location.search.substr(1).split("&");
            id = parts[0];
            console.log(id)
        const blogComment = document.querySelector(".comments");
        blogComment.innerHTML = `${blog[id].comments.map((index)=>`<div class="commenting">
                <div class="commentscard">
                    <p>name : ${index['name']}
                        </p>
                    <p>message :${index['msg']}</p>
                </div>
            </div>`).join("") }`
        }
    </script>
</body>

</html>